## 补充1：网络分析与可达性分析

主要基于《空间数据分析》第5章，《地理信息系统空间分析原理》第5章作为补充。

**以下5.1~5.3的内容均与标题不直接相关，5.2和5.3应当属于计算几何的范畴，只是原教材中有相关小节，这里顺带总结**

## 5.1 空间关系

空间关系可以分为距离关系、方位关系、拓扑关系和相似关系四类（或者除去最后一个相似关系，认为只有三种，因为个人认为前三种关系均基于几何，与所谓的“相似关系”应该不在一个范畴里）。

## 5.2 邻近度

邻近度（proximity）是描述空间目标距离关系的指标，表示空间物体间距离相近的程度。以距离关系为分析基础的邻近度分析是空间几何分析的重要手段。

### 5.2.1 缓冲区

缓冲区生成：

+ 矢量方法：角分线法/凸角圆弧法
+ 栅格方法：形态学方法+距离变换

### 5.2.2 Voronoi图

根据有限的采样点数据生成对应的有限个面区域，每个面区域内只有一个点，且各个面区域内的点到其采样点的距离小于等于任何到其他面的距离（边界上的点相等），中心的采样点被称为控制点/质心。即Voronoi图（Thiessen多边形）是对平面的一个剖分。其性质如下：

+ 每个Thiessen多边形内只含一个采样点；
+ Thiessen多边形内的点到其相应控制点的距离最近；
+ 位于Thiessen多边形边上的点到其两边控制点的距离相等；
+ 若Thiessen多边形是k边形，则其与k个离散点相邻。

Delaunay三角网是Voronoi图的对偶图，是由与相邻的Thiessen多边形共享一条边的相关点连接而成的三角网，矢量方法生成V图的关键一步就是建立Delaunay三角网，其性质如下：

+ Delaunay三角网是唯一的；
+ Delaunay三角网的外边界构成了点集凸壳；
+ 没有任何点集中的其他点在三角网中一个三角形外接圆的内部；
+ Delaunay三角剖分是使三角形最小角最大化的一种剖分方式。

Delaunay三角网生成的矢量方法有：张角最大法、空外接圆法、凸壳插值法等。

Voronoi图的矢量生成方法有：基于Delaunay三角网计算出每个三角形外接圆的圆心，连接相邻的外接圆圆心即可（边界上的点特殊处理，中垂线与图廓相交）、Fortune算法等。

栅格方法则基于距离变换。

此外，还有高阶V图、最远点V图、加权V图等，这里不再具体介绍。

## 5.3 叠加分析

叠加分析是将同一地区、同一比例尺、同一数学基础、不同信息表达的两组或多组专题要素的图层进行叠加，根据各类要素与多边形边界的交点或多边形属性建立具有多重属性组合的新图层，并对那些在结构和属性上既相互重叠又相互联系的多种现象要素进行综合分析和评价；或者对反映不同时期同一地区同一地理现象的多边形图层进行多时相系列分析，从而深入揭示各种现象要素的内在联系及其发展规律的一种空间数据分析方法。

+ 矢量叠加：几何处理：Weiler-Atherton算法（多边形裁剪）
+ 栅格叠加：栅格代数计算

## 5.4 网络分析

网络是用于实现资源运输和信息交流的一系列相互连接的线性特征组合，其是一个由点、线的二元关系构成的系统，通常用来描述某种资源或物质沿着路经在空间上的运动。网络分析通过研究网络的状态，模拟和分析资源在网络上的流动和分配情况，对网络结构及其资源分配进行优化的一种空间数据分析方法。

网络数据模型：网络由链（网络中的线状要素）、节点（网络链的两个端点）、站点（网络中装载或卸下“资源”的节点）、中心（提供“资源”的节点）、障碍（对“资源”运输起阻碍作用的结点或链）和转向（网络中“资源”在节点处发生的方向变化）组成。

|<div style="width:40px">功能</div>|描述|相关算法|
|:----:|:----|:----|
|路径分析|模拟两个或多个地点之间资源流动的路径寻优过程。当选择了起点、终点和路径必须经过的若干中间点后，就可以通过路径分析寻找最优路径|单源最短路径算法：边权无负值：Dijkstra算法、A*算法；边权可以是负值：Bellman-Ford算法、SPFA算法。多源最短路径算法：Floyd-Warshall算法。货郎担问题（TSP问题，Travel Salesman Problem，旅行商问题）、中国邮路问题的规划算法、贪心等算法|
|连通分析|包括连通分量的求解以及设计最小费用的连通方案|最小生成树算法：Kruskal算法、Prim算法|
|定位与配置分析|即Location-Allocation问题，即设定一定数量的需求点，求一定数量的供给点及供给点的需求分配用来完成某个规划目的，具体而言：定位问题是已知需求源的分布，求在哪里布设供应点最合适的问题；分配问题是确定需求源分别接受哪个供应点服务的问题|P-中心问题的求解常采用启发式或最优化算法，如Teitz-Bart算法|

## 5.5 可达性分析

可达性概念源于古典区位论，最开始被看作反应交通成本的指标，旨在对空间上某一实体的位置优劣程度进行度量。一些基本观点：

+ 可达性不是地点具有的品质，而是反映该地点在整个区域的相对地位或区位；
+ 若两点的关系不是单向的，则可达性具有双向对等性；
+ 计算实体间的可达性以空间为中介，空间上的可达性等于人活动的可达性。

三大类模型：

|<div style="width:30px">类别</div>|描述|优点|<div style="width:150px">缺点</div>|
|:----:|:----|:----|:----|
|基于空间阻隔|也称距离法，基于图论来研究区域中节点的可达性，阻隔程度越低，可达性越好|方法简单，直观易懂|忽视了目的地的吸引力以及人的活动等因素的影响|
|基于机会累积|在某个设定时间、距离或成本阈值的条件下，统计出发点能够接近的目标点数量，数量越多，代表可达性越高。具体计算方法有：+ 等值线法（根据出行成本进行分级，统计不同成本分级下可到达的目标点数量）+ 移动搜索法（以出发点为圆心、极限距离为半径的圆作为搜索区域，以区内供给点的总数以及需求点的比例作为度量值） + 两步移动搜索法（先以供给点为圆心，计算距离$d_0$内的需求点$k$，计算供需比$R_j$，再以每个需求为圆心，计算其距离$d_0$内的$R_j$之和）|适用于评价一个城市的公共、医疗、教育、娱乐等设施的分布情况，从而评价设施分配是否合理、不同群体或区域对某种服务设施的可达性与邻近性是否公平|阈值的选择有较大的主观性|
|基于空间相互作用|两区之间的出行数与出发区的出行发生量和到达区的出行吸引量成正比，与两区间的行程时间（费用、距离等）成反比关系来建立未来交通分布预测模型，也称此类模型为基于势能的模型，如Hasen势能模型（基于重力模型）、Shen势能模型等|能考虑路网的变化和土地利用对人们出行的影响（对Shen模型进一步细化，考虑不同交通方式、交通阻隔等因素）|交通出行时间上可能是不一致的|

对两步移动搜索法的拓展：

+ 引入距离衰减函数：原始的两步移动搜索在半径内的可达性是相同的，即$A_i=\sum_{j=1}^{n}{\frac{S_jf(d_{ij})}{\sum_{k=1}^m{D_kf(d_{kj})}}}$，其中$S_j$是供给点$j$的攻击规模，$D_k$是需求点$k$的需求规模，$A_i$是需求点$i$的可达性分数，$f(d_{ij})$是$i、j$供给点和需求点之间的距离衰减函数，$m$是阈值半径内的需求点个数，$n$是需求点$i$阈值半径内的供给点个数
+ 对搜索半径的拓展：可变半径/动态半径/多级半径
+ 针对需求或供给竞争的拓展：三步移动搜索法：当一个需求点半径内存在多个设施点时，设施之间存在竞争效应；则在第二步搜索之前，增加一步包括全部需求点和设施点在内的搜索，计算选择权重$G_{ij}=\frac{T_{ij}}{\sum T_{ik}}$；Huff型搜索法：对三步搜索法的选择变量的权重进行修正，以综合考虑出行成本和设施点服务能力对出行选择的影响，即$HG_{ij}=\frac{S_jf(d_{ij})}{\sum S_kf(d_{ik})}$
+ 针对出行方式的拓展：即考虑不同交通方式对距离和时间阈值的响应不同